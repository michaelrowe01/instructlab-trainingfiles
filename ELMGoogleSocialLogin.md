META:TOPICINFO{author="shradha" date="1710394469" format="1.1"
reprev="1.4" version="1.4"}
META:TOPICPARENT{name="JazzAuthorizationServer"}

# Configure Google Social Login for ELM DKGRAY Authors: Main.ShradhaSrivastav Build basis: Engineering Lifecycle Management and Jazz Authorization Server 7.x ENDCOLOR [configure-google-social-login-for-elm-dkgray-authors-main.shradhasrivastav-build-basis-engineering-lifecycle-management-and-jazz-authorization-server-7.x-endcolor]

TOC{title="Page contents"}

## Configure Google Social Login for ELM

Any application that uses OpenID Connect to access Google APIs must have
authorization credentials that identify the application to Google's OIDC
Provider. The following steps explain how to create credentials for your
project. Your applications can then use the credentials to access APIs
that you have enabled for that project.

### Create authorization credentials

1\. Go to the [Credentials
page](https://console.developers.google.com/apis/credentials). 1. Click
Configure Consent Screen → Select External → Click Create BR

\* Click Create credentials \> OAuth client ID. BR

\* Select the Web application application type. BR

-   Name your OIDC client and click Create
-   The redirect URL points to the ID of your configured oidcLogin
    element in the following format

[https://liberty_host:SSL_port/ibm/api/social-login/redirect/oidclogin_id](https://liberty_host:SSL_port/ibm/api/social-login/redirect/oidclogin_id)

BR

\* After configuration is complete, take note of the client ID that was
created. You will need the client ID to complete the next steps. BR

\* Move to OAuth consent screen and add Users in the Test user section
which will be used for login into application. (The user should exist in
ELM user repository with same UserID) BR

### Import Google Certificates

\* Access google.com on FireFox \* Click on Certificate from address bar
-\> Connection Secure -\> More Information BR

\* Click View Certificate BR

\* Download the cert chain BR

\* Import the downloaded certificate to the JAS truststore. Use a key
management tool such as iKeyman or the Java keytool utility to add the
certificate to the JAS truststore file. BR

### Configure Social Login in JAS to Redirect to Google Login

You can configure a Liberty server so that users can authenticate to
websites that are hosted on the Liberty server by logging in with their
social media accounts. For JAS to connect to a different OIDC server we
define our own social login configuration that is based on the OAuth 2.0
or OpenID Connect 1.0 standards.

In Liberty, social login is enabled by the socialLogin-1.0 feature. Here
are instructions to configure Social Login for a 3rd Party OIDC server.

-   Open the `[JAS_HOME]\wlp\usr\servers\jazzop\server.xml`
    configuration file and add the socialLogin-1.0 , ssl-1.0 and
    appSecurity-2.0 features.

socialLogin-1.0 appSecurity-2.0 ssl-1.0 ...

-   Add the `oidcLogin` element and configure the connection to your
    OIDC provider
-   Define the OIDC server endpoints on the `authorizationEndpoint` ,
    `tokenEndpoint` , `jwksUri` and `issuer` attributes The Liberty
    server first redirects the user to the authorization endpoint to
    authenticate the user and obtain the OAuth authorization code. Then,
    it invokes the token endpoint to exchange the OAuth authorization
    code for an OAuth token.

<!-- -->

-   The endpoints data required in the configuration can be obtained
    from the discovery endpoint URL of the OIDC provider. Lets take an
    example of Google OIDC provider, the discovery endpoint URL is
    `https://accounts.google.com/.well-known/openid-configuration`

<!-- -->

-   The configuration with data from the discovery endpoint is as seen
    below and needs to be included in
    `[JAS_HOME]\wlp\usr\servers\jazzop\appConfig.xml` after
    `oauthProvider` section

<!-- -->

-   The `clientId` and `clientSecret` are to be generated by your OIDC
    provider (In the next step)
-   The redirect URL points to the ID of your configured oidcLogin
    element in the following format

[https://liberty_host:SSL_port/ibm/api/social-login/redirect/oidclogin_id](https://liberty_host:SSL_port/ibm/api/social-login/redirect/oidclogin_id)

-   For example, the redirect URL for the oidcLogin configuration
    example has the following format:

<https://%5BJAS_HOST%5D>:\[Port\]/ibm/api/social-login/redirect/myoidcserver

Note:- As the Google OIDC provider works with user email address as User
ID, update the configuration in JAS and JTS to use mail as userID
instead of sAMAccountName default for MS AD.

To configure JAS login with email address, update `ldapUserRegistry.xml`
located at `[JAS_HOME]\wlp\usr\servers\jazzop` and modify to match your
enviornment, example below

**Microsoft Active Directory**

**ApacheDS**

Update following parameters in JTS `teamserver.properties` file to use
mail address as the User ID

com.ibm.team.repository.ldap.userAttributesMapping=userId\\mail,name\\cn,emailAddress\\mail
com.ibm.team.repository.ldap.findUsersByUserIdQuery`mail\`?1

##### Related topics: [Deployment web home](DeploymentWebHome), [Deployment web home](DeploymentWebHome) [related-topics-deployment-web-home-deployment-web-home]

##### External links: [external-links]

-   [IBM](https://www.ibm.com)

META:FILEATTACHMENT{name="1.png" attachment="1.png" attr="h" comment=""
date="1708594147" path="1.png" size="118365" user="shradha" version="1"}
META:FILEATTACHMENT{name="2.png" attachment="2.png" attr="h" comment=""
date="1708594196" path="2.png" size="159828" user="shradha" version="1"}
META:FILEATTACHMENT{name="3.png" attachment="3.png" attr="h" comment=""
date="1708594215" path="3.png" size="70951" user="shradha" version="1"}
META:FILEATTACHMENT{name="7.png" attachment="7.png" attr="h" comment=""
date="1708594264" path="7.png" size="75291" user="shradha" version="1"}
META:FILEATTACHMENT{name="8.png" attachment="8.png" attr="h" comment=""
date="1708594502" path="8.png" size="24290" user="shradha" version="1"}
META:FILEATTACHMENT{name="5.png" attachment="5.png" attr="h" comment=""
date="1708594865" path="5.png" size="547331" user="shradha" version="1"}
META:FILEATTACHMENT{name="dwnldcerts.png" attachment="dwnldcerts.png"
attr="h" comment="" date="1710317131" path="dwnldcerts.png"
size="246122" user="shradha" version="1"}
META:FILEATTACHMENT{name="googlecert.png" attachment="googlecert.png"
attr="h" comment="" date="1710317245" path="googlecert.png" size="78849"
user="shradha" version="1"} META:FILEATTACHMENT{name="importcerts.png"
attachment="importcerts.png" attr="h" comment="" date="1710317287"
path="importcerts.png" size="323086" user="shradha" version="1"}
META:FILEATTACHMENT{name="certjas.png" attachment="certjas.png" attr="h"
comment="" date="1710317366" path="certjas.png" size="356020"
user="shradha" version="1"} META:FILEATTACHMENT{name="viewcerts.png"
attachment="viewcerts.png" attr="h" comment="" date="1710317501"
path="viewcerts.png" size="66702" user="shradha" version="1"}
